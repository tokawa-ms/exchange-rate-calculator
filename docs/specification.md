# 為替レート変換計算機 - 仕様書

## 概要

為替レート変換計算機は、モバイルデバイス向けに最適化された通貨変換アプリケーションです。3つの通貨間での金額変換を簡単に行うことができます。

## 機能仕様

### 1. 初期設定機能

#### 設定項目
- **自国通貨**: デフォルト値 `JPY`（3文字の通貨コード）
- **変換対象通貨1**: デフォルト値 `NTD`（3文字の通貨コード）
- **変換対象通貨1のレート**: 1[自国通貨] = N[変換対象通貨1] の変換レート
- **変換対象通貨2**: デフォルト値 `USD`（3文字の通貨コード）
- **変換対象通貨2のレート**: 1[自国通貨] = N[変換対象通貨2] の変換レート

#### 設定の保存・管理
- 設定はブラウザのlocalStorageに永続化される
- 設定完了後、初期設定パネルは自動的に折りたたまれる
- 設定パネルはクリックで展開/折りたたみ可能

#### 入力検証
- 通貨コードは3文字必須
- 為替レートは正の数値必須
- 同じ通貨コードの重複は不可

### 2. 通貨変換機能

#### 変換方式
- **双方向変換**: どの通貨フィールドに入力しても、他の2通貨が自動計算される
- **リアルタイム変換**: 値入力と同時に自動変換が実行される
- **小数点2桁表示**: 計算結果は小数点以下2桁で表示

#### 計算ロジック
- 基準通貨から対象通貨への変換: `対象通貨金額 = 基準通貨金額 × 為替レート`
- 対象通貨から基準通貨への変換: `基準通貨金額 = 対象通貨金額 ÷ 為替レート`
- 対象通貨間の変換: 一度基準通貨を経由して計算

### 3. ユーザーインターフェース

#### モバイル最適化設計
- **対象デバイス**: 主にモバイルデバイス（縦長画面）
- **レスポンシブ対応**: 320px〜768px の画面幅に最適化
- **ビューポート設定**: モバイル表示に適切なスケーリング

#### UI コンポーネント
- **ヘッダー**: アプリ名と説明
- **設定パネル**: 折りたたみ可能な初期設定エリア
- **変換パネル**: 3通貨の金額入力フィールド
- **フッター**: コピーライト表示

#### 視覚的フィードバック
- **色分け**: 各通貨フィールドを異なる色で識別
  - JPY: 青色（#3B82F6）
  - 対象通貨1: 緑色（#10B981）
  - 対象通貨2: 紫色（#8B5CF6）
- **フォーカス表示**: 入力中のフィールドを強調
- **ホバー効果**: ボタンやクリック可能要素の視覚的フィードバック

### 4. データ永続化

#### localStorage仕様
- **キー名**: `exchangeRateSettings`
- **データ形式**: JSON
- **保存内容**:
  ```json
  {
    "baseCurrency": "JPY",
    "targetCurrency1": "NTD", 
    "targetRate1": 4.5,
    "targetCurrency2": "USD",
    "targetRate2": 0.0067
  }
  ```

## 技術仕様

### フロントエンド技術スタック
- **HTML5**: セマンティックなマークアップ、UTF-8エンコーディング
- **CSS3**: TailwindCSS（CDN）+ カスタムCSS + フォールバックCSS
- **JavaScript**: ES6+準拠、クラスベース実装

### ブラウザ対応
- **モダンブラウザ**: Chrome 90+, Firefox 88+, Safari 14+
- **モバイルブラウザ**: iOS Safari, Android Chrome

### パフォーマンス要件
- **初期読み込み**: 1秒以内
- **変換計算**: リアルタイム（入力時即座）
- **設定保存**: 即座にlocalStorageへ永続化

## セキュリティ要件

### データ保護
- **ローカルストレージのみ使用**: 外部サーバーへのデータ送信なし
- **機密情報なし**: APIキーや秘密情報は含まない
- **XSS対策**: 入力値のサニタイズ実装

## 運用要件

### 動作環境
- **実行方法**: HTMLファイルをブラウザで直接開くだけ
- **サーバー不要**: 完全にクライアントサイドで動作
- **インターネット接続**: 初回読み込み時のCDNアクセスのみ（フォールバック対応済み）

### デバッグ・メンテナンス
- **コンソールログ**: 詳細なデバッグ情報出力
- **エラーハンドリング**: 適切な例外処理とユーザーへの通知
- **ログレベル**: INFO、ERROR レベルでの情報出力

## 拡張性

### 今後の機能追加可能項目
- 通貨数の増加（現在3通貨 → N通貨）
- 為替レートAPI連携
- 履歴機能
- 通貨計算の単位設定（千円、万円表示等）
- ダークモード対応
- 多言語対応

### アーキテクチャの拡張性
- **クラス設計**: 機能追加しやすいオブジェクト指向設計
- **設定管理**: JSON形式でデータ構造の柔軟な拡張が可能
- **UI コンポーネント**: モジュール化された再利用可能な構造